<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module sc.net</title>
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module sc.net</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-4903191-10");pageTracker._trackPageview();</script>.
<p>Copyright © 2007 - current John Haugeland, All Rights Reserved</p>

<p><b>Version:</b> $Revision: 264 $</p>
<p><b>Introduced in:</b> Version 8</p>
<p><b>Authors:</b> John Haugeland (<a href="mailto:stonecypher@gmail.com"><tt>stonecypher@gmail.com</tt></a>).</p>
<p><b>References</b><ul><li><span style="padding:0.1em 0.4em;background-color:#eef;display:inline-block;width:47em"><span style="display:inline-block;width:18em">Website is</span><a href="http://scutil.com/">http://scutil.com/</a></span></li><li><span style="padding:0.1em 0.4em;background-color:#efe;display:inline-block;width:47em"><span style="display:inline-block;width:18em">Author's Website</span><a href="http://fullof.bs">Full of BS</a></span></li><li><span style="padding:0.1em 0.4em;background-color:#eef;display:inline-block;width:47em"><span style="display:inline-block;width:18em">This library is released under the</span><a href="http://scutil.com/license.html">MIT License</a></span></li><li><span style="padding:0.1em 0.4em;background-color:#efe;display:inline-block;width:47em"><span style="display:inline-block;width:18em">This build was released</span><tt style="text-decoration:underline;background-color:#eee">$Date: 2009-03-15 13:47:01 -0600 (Sun, 15 Mar 2009) $</tt></span></li></ul></p>

<h2><a name="description">Description</a></h2><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-4903191-10");pageTracker._trackPageview();</script>
  <p> </p>
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#make_node-2">make_node/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#standard_listener-3">standard_listener/3</a></td><td><a href="#Network">Network</a> Listens on a socket and manages the fast packet loss problem.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="make_node-2">make_node/2</a></h3>
<div class="spec">
<p><tt>make_node(Name, Host) -&gt; any()</tt></p>
</div>
<p><b>Introduced in:</b> Version 211</p>

<h3 class="function"><a name="standard_listener-3">standard_listener/3</a></h3>
<div class="spec">
<p><tt>standard_listener(Handler, Port, SocketOptions) -&gt; {ok, WorkerPid, ListeningPort} | {error, E}</tt></p>
</div><p><p><a href="#Network">Network</a> Listens on a socket and manages the fast packet loss problem.</p>
 
  <p>There is a defect in the canonical listener, where under extreme load a packet could be delivered before the socket has been traded off to the handler process.  This would mean that the socket could deliver one (or, theoretically, more) packets to the wrong process.  <code>{active,false}</code> is immune to this problem, but very inconvenient and in some ways against the erlang mindset.</p>
 
  <p><code>standard_listener</code> resolves the default <code>{active,true}</code> into the configuration if missing, then if active is not <code>{active,false}</code>, strips the active status out, handles the socket <code>{active,false}</code>, then passes to an internal handling function which re-engages the expected active status (erlang sockets when switched to active true or once immediately deliver their backlogs), and passes off to the user specified handler which receives its expected behavior without change.  (Also, this takes some of the repeat grunt work out of making listeners.)</p>
 
  <p>The function in Handler should be a 2-ary function which accepts a socket and the list of options the socket used, augmented with the tuple <code>{from_port,Port}</code>, where <code>Port</code> is the listening port from which the connection was accepted.<span style="color:red">TODO: Needs code example</span></p>
 
  <a href="#Thanks">Thanks</a> to MisterN for counsel, noticing several embarrassing bugs, and challenging me to refine my approach from several directions.  Thanks to Steve Vinoski for pointing out that I'd neglected to set the controlling process, that the port closed signal was not being caught, and that ephemeral ports could nicely be supported by opening port 0 then reporting the listening port.</p>
<p><b>Introduced in:</b> Version 96</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Mar 22 2009, 20:57:25.</i></p>
</body>
</html>
